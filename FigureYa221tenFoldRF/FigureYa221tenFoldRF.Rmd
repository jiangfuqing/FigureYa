---
title: "FigureYa221tenFoldRF"
author: "小丫画图出品"
date: "2021-2-26"
output: html_document
---
欢迎关注“小丫画图”公众号，回复“小白”，看小视频，实现点鼠标跑代码。

小丫微信: epigenomics  E-mail: figureya@126.com

作者：大鱼海棠

单位：中国药科大学国家天然药物重点实验室，生物统计与计算药学研究中心

小丫编辑校验

# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 需求描述

想众筹下10折交叉验证的分析方法，FigureYa182RFSurv和FigureYa198SignatureComb 都是根据基因的重要性筛选的，直接根据随机森林的准确度筛选，又是另一种不同的展示方式。

![](example.png)

出自<https://www.aging-us.com/article/102814>

Supplementary Figure 4. (A) Relation between classification accuracy and selected genes via recursive feature elimination algorithm.

# 应用场景

随机森林的10折交叉验证。

Using recursive feature elimination (RFE) with random forest as classifier and 10-fold cross-validation method in R package caret to screen features.

cox模型的10折交叉验证可参考FigureYa220repeatedLasso

# 环境设置


```{r}
source("install_dependencies.R")

```

加载包

```{r}
library(caret)
library(survival)
library(shape)
Sys.setenv(LANGUAGE = "en") #显示英文报错信息
options(stringsAsFactors = FALSE) #禁止chr转成factor
```

自定义函数

```{r}
display.progress = function (index, totalN, breakN=20) {
  if ( index %% ceiling(totalN/breakN)  ==0  ) {
    cat(paste(round(index*100/totalN), "% ", sep=""))
  }
}
```

# 输入文件

InnateDB_genes.csv，免疫基因集。数据来自<https://www.innatedb.com/redirect.do?go=resourcesGeneLists> Immunogenetic Related Information Source (IRIS)

easy_input_expr.txt，表达谱。文件较大，已上传至微云<https://share.weiyun.com/0esnGlCh>

easy_input_surv.txt，生存数据。
