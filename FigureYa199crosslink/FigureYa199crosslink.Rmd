---
title: "FigureYa199crosslink"
author: "Zongcheng Li"
reviewers: "Ying Ge,Hui Huang"
date: "2025-5-20"
output: html_document
---
# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 需求描述

这幅连线图很有趣，比FigureYa174squareCross多了两层信息：点的大小和颜色。

# Requirement Description

This line diagram is interesting because it has two more layers of information than FigureYa174squareCross: the size and color of the dots.

![](example1.png)

出自<https://www.biorxiv.org/content/10.1101/2020.07.21.214387v1>
from<https://www.biorxiv.org/content/10.1101/2020.07.21.214387v1>

Figure 2: CellChat analysis of the communications between skin cells during wound repair. (a) **Hierarchical plot** shows the inferred intercellular communication network for TGFb signaling. **Left and right panels** highlight the autocrine and paracrine signaling to fibroblast states and other non-fibroblast skin cell states, respectively. **Solid and open circles** represent source and target, respectively. **Circle sizes** are proportional to the number of cells in each cell group. **Edge colors** are consistent with the signaling source.

类似的图：
similar plot:

![](example2.png)

出自<https://molecular-cancer.biomedcentral.com/articles/10.1186/s12943-019-1066-3>
from<https://molecular-cancer.biomedcentral.com/articles/10.1186/s12943-019-1066-3>

Fig. 2 m6A regulators are correlated with the activation and inhibition of cancer pathways. a Network diagram demonstrating the correlation between m6A regulators and cancer pathways. Red represents a positive correlation, and blue represents a negative correlation. The size of the nodes corresponds to the number of links.

# 应用场景

任意两组、多组连线，同时用颜色大小展示节点的更多信息，用连线的颜色粗细展示关系的类别强弱等信息。

根据自己数据的生物学意义，来排列各个节点的顺序。或许能够出现特殊的模式，从而展示出有意义的生物学规律。

上下左右连线的方法可参考FigureYa174squareCross。

# Application Scenario
Connect any two or multiple groups with lines, while using color and size to display additional node information, and the color/thickness of the connecting lines to represent relationship categories and strengths.

Arrange the order of nodes based on the biological significance of your data. This may reveal unique patterns, thereby demonstrating meaningful biological insights.

For methods of connecting nodes (top, bottom, left, right), refer to FigureYa174squareCross

# 环境设置

.
# Environment Setup


```{r}
source("install_dependencies.R")
```

```{r eval=FALSE}

devtools::install_github("zzwch/crosslinks")
# 或者本地安装
# Or install it locally
install.packages("crosslinks-master.tar.gz", repos = NULL, type = "source")
```

加载包
load package

```{r}
library(crosslinks)
library(ggplot2)
Sys.setenv(LANGUAGE = "en") #显示英文报错信息 # error messages are displayed in English
options(stringsAsFactors = FALSE) #禁止chr转成factor # It is forbidden to convert chr into factor
```

# 输入文件
# Input files

> 图中每个点、每条线的外观设置有两种方式供你选择。理解之后就可以灵活运用了，例如有些外观用代码写，有些外观填写在输入文件里。

- 方式一：在输入文件中填写外观，个性化地写成不同的值。
  - 优点：所见即所得，写什么样就画出什么样
  - 缺点：麻烦

- 方式二：在输入文件中最少可以只写id和type两列，其余外观都可以在画图时通过设置参数来实现。
  - 优点：方便修改，能用代码就不去一个一个写，便于跟上游分析衔接。
  - 缺点：外观种类太多时，其实不如“方式一”方便

easy_input_nodes.csv，每个节点为一行。第一列是节点id，之后是其类别type、颜色color、大小size、透明度alpha和形状shape。例如一个节点代表一个基因；type列就写gene；颜色、大小、透明度和形状都可以代表基因的某一特征值，例如表达量等。

easy_input_edges.csv，每两个被连起来的节点为一行，前两列是两个节点的id，之后是颜色color、类型type、透明度alpha和粗细size，这些外观信息可以代表每两个节点之间关系的强度、类型等。

> There are two ways to customize the appearance of each point and line in the figure. Once understood, you can apply them flexibly—for example, setting some appearances via code while specifying others in the input file.

-Option 1: Define appearances in the input file with custom values
 Pros: WYSIWYG (What You See Is What You Get)—the output will match exactly what you write.
 Cons: More tedious to set up.

-Option 2: Keep the input file minimal (only id and type columns required) and control appearances via plotting parameters
 Pros: Easier to modify; avoids manual editing for each element and integrates smoothly with upstream analysis.
 Cons: Less convenient than Option 1 when dealing with too many appearance variations.

-Input File Formats:easy_input_nodes.csv.Each row represents a node. The first column is the node id, followed by its type, color, size, alpha (transparency), and shape.

Example: If a node represents a gene, set type as "gene."Other columns (color, size, alpha, shape) can encode additional features (e.g., expression levels).

-easy_input_edges.csvEach row connects two nodes. The first two columns are the linked node ids, followed by color, type, alpha, and size (thickness).These attributes can reflect relationship strength, type, etc.
