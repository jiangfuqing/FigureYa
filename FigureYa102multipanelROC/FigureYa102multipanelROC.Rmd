---
title: "FigureYa102multipanelROC"
author: "Xiaofan Lu, Taojun Ye"
reviewer: "Ying Ge"
date: "2025-5-20"
output: html_document
---

# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# 设置knitr代码块的全局选项 / Set global options for knitr code chunks
```

## 需求描述

FigureYa24ROC能拿到4个miRNA的ROC，每个miRNA一条线。这里的Figure5E是把上述4条miRNA都一起进行预测，Figure6根据4个miRNA建立logistic regression model，然后对不同病理分期的肿瘤阶段进行预测。

## Requirement description

Figure Ya24ROC can obtain ROC for 4 miRNAs, with one line for each miRNA. Figure 5E predicts all four miRNAs together, while Figure 6 establishes a logistic regression model based on the four miRNAs and predicts tumor stages at different pathological stages.

![](example.png)

出自<https://www.nature.com/articles/bjc2014489>

from<https://www.nature.com/articles/bjc2014489>

Figure 5. Receiver operating characteristic (ROC) curves for the ability of the four individual miRNAs (A–D) and **the 4-miRNA panel (E)** to differentiate the CAC patients from the control group in the training phase. Comparison of ROC curves for the ability of the 4-miRNA panel and carcinoembryonic antigen (CEA) (F) to differentiate the CAC patients from the control group in the validation phase.

**对图的解读：**其中Figure 5E是多变量panel下逻辑回归的ROC，Figure 5F是该模型在验证集中的应用。Figure 5和6没有本质区别，只是响应变量改变了，模型没有变化。这里将提供构建multiple-biomarker的predictive model的方法，用ROC评价，及其在验证集中的performance，画出对比的ROC图。

**Interpretation of the figures: * * Among them, Figure 5E is the ROC of logistic regression under multivariate panel, and Figure 5F is the application of the model in the validation set. There is no essential difference between Figures 5 and 6, only that the response variables have changed, while the model has not changed. Here we will provide a method for constructing a predictive model of multiple biomarkers, using ROC evaluation and its performance in the validation set, and draw a comparative ROC graph.

## 应用场景

利用训练集构建多变量二分类逻辑回归模型，将模型应用于测试集计算预测概率，比较二者的ROC，画图。

如果需要计算并绘制单个biomarker的ROC，请参考FigureYa24ROC。

## Application scenarios

Build a multivariate binary logistic regression model using the training set, apply the model to the test set to calculate the prediction probability, compare the ROC of the two, and draw a graph.

If you need to calculate and plot the ROC of a single biomarker, please refer to FigureYa24ROC.

## 环境设置

## Environment settings

```{r}
source("install_dependencies.R")
# 加载pROC包，用于ROC曲线分析和计算
# Load the pROC package for ROC curve analysis and calculation
library(pROC)

# 设置环境语言为英文，确保错误信息以英文显示
# Set the environment language to English to display error messages in English
Sys.setenv(LANGUAGE = "en")

# 禁用字符串自动转换为因子的功能
# Disable the automatic conversion of strings to factors
options(stringsAsFactors = FALSE)
```

## 输入文件

easy_input_train.txt，easy_input_test.txt，训练集和测试集，格式一致。第一列是样本ID，第二列为分组（二分类），之后各列是基因表达量。不仅限于基因表达量，还可以是其他量化指标。

## Input file

easy_input_train.txt，easy_input_test.txt， The training set and test set have the same format. The first column is sample ID, the second column is grouping (binary classification), and the following columns are gene expression levels. Not limited to gene expression levels, it can also be other quantitative indicators.
