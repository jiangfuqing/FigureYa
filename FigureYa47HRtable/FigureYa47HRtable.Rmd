---
title: "FigureYa47HR2table"
author: "Yuan Tang; Ying Ge, Yijing Chen"
date: "2025-5-20"
output: html_document
---

# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 需求描述
## Requirement description

计算coxHR，单因素cox和多因素cox，输出为表格

Calculate coxHR, univariate cox and multivariate cox, output as table


![](example.png)

出自<https://jhoonline.biomedcentral.com/articles/10.1186/s13045-017-0445-8>

from<https://jhoonline.biomedcentral.com/articles/10.1186/s13045-017-0445-8>

## 应用场景
## Application scenario

对比和展示临床相关因素和基因表达对疾病发病或预后的影响。

例如TCGA数据、大规模临床试验数据等等。

Compare and demonstrate the impact of clinical-related factors and gene expression on disease onset or prognosis.

For example, TCGA data, large-scale clinical trial data, etc.

## 输入数据
## Input data

包含示例表格中研究的相关因素，每个因素为一列，最后两列是两个基因的表达矩阵；每行是一个sample。

It contains the relevant factors studied in the example table, one column for each factor, and the last two columns are the expression matrices of the two genes; each row is a sample.

```{r}
source("install_dependencies.R")
clin_mRNA_miRNA <- read.csv("easy_input.csv", as.is = T)
head(clin_mRNA_miRNA)
```

**特别说明：**从TCGA数据库下载数据到整理成这个文件，经过了很多步骤。感兴趣的小伙伴可参考压缩包中的`How_to_get_easy_input.R`文件，里面是前期数据处理的代码。

- 原文未详细描述样品筛选的方法，我们采用公认的方法进行了样品筛选。

- 原文也未提供验证数据集，因此，从TCGA随机抽取60个样本作为验证。

因此，最后生成的表格中的数值与原文有出入。

下面开始进行数值计算和表格绘制：

**Special Note:** The process from downloading data from the TCGA database to organizing it into this file involved many steps. Interested users can refer to the `How_to_get_easy_input.R` file in the compressed package, which contains the code used for preliminary data processing.

- The original article did not describe the sample selection method in detail; we adopted a widely accepted method for sample selection.

- The original article also did not provide a validation dataset; therefore, 60 samples were randomly selected from TCGA for validation.

As a result, the values in the final generated table differ from those in the original article.

Now we begin numerical calculation and table plotting:

## 数值计算
## Numerical calculation

### 临床数据和表达量的预处理
### Preprocessing of clinical data and expression
