---
title: "FigureYa4 bestSeparation"
author: "Dekang Lv; Ying Ge, Yijing Chen"
date: "2025-5-20"
output: html_document
---

# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 需求描述
## Requirement description

做生存分析，Best separation和Median separation，后者很简单，很想学前者，求Best separation的代码

Do survival analysis, Best separation and Median separation. The latter is very simple. If you really want to learn the former, look for the code for Best separation.

## 使用场景
## Usage scenario

在展示基因表达水平（连续变量）对生存期的影响时找到最佳分组

Find the best grouping when showing the impact of gene expression level (continuous variables) on survival

## 输入
## Input

包含基因表达水平、生存时间、追踪情况等三列的文件，测试用文件为dsg1.txt

A file containing three columns of gene expression levels, survival time, and tracking, the file used for testing is dsg1.txt

```{r,message=FALSE,warning=FALSE}
source("install_dependencies.R")
#install.packages(c("survival","survminer","ggplot2"))
library(survival)
library("survminer")
library(ggplot2)

#读入测试文件dsg1.txt
#read the test file dsg1.txt
svdata<-read.table("dsg1.txt",header=T,as.is=T)
head(svdata)
#对行按照基因表达水平排序，默认从低到高
#Sort the rows by gene expression levels, with the default order being from low to high
sortsv<-svdata[order(svdata$expression),]
```
## 输出
## Output

中位值分组的生存曲线、最佳分组生存曲线、遍历所有分组情况下的P值和Hazard Ratio的分布情况

The survival curve of the median value group, the best group survival curve, and the distribution of P value and Hazard Ratio in all grouping situations

## 中位值分组
## Median separation
