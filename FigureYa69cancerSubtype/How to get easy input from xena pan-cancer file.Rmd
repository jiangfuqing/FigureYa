---
title: "How to get easy input from xena pan-cancer file"
author: "小丫画图出品"
date: "2019-1-20"
output: html_document
---
欢迎关注“小丫画图”公众号，同名知识星球等你加入

小丫微信: epigenomics  E-mail: figureya@126.com

作者：小高

小丫编辑校验

# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
source("install_dependencies.R")
knitr::opts_chunk$set(echo = TRUE)
```

## 需求描述

从xena的pan-cancer文件中提取感兴趣的癌症的表达和生存数据

![](example.png)

出自<https://link.springer.com/article/10.1007%2Fs00432-018-2684-7>

## 应用场景

从xena下载pan-cancer的RNA-seq数据和Cell处理优化过的生存数据，为FigureYa69CancerSubtypes准备好输入文件。

## 环境设置

```{r}
library(stringr)
library(data.table)
```

## 参数设置

```{r}
targetCancer <- "skin cutaneous melanoma" #感兴趣的癌症全称
```

## 数据下载

数据来源：

- Survival_SupplementalTable_S1_20171025_xena_sp，cell处理优化过的生存资料，下载地址：<https://pancanatlas.xenahubs.net/download/Survival_SupplementalTable_S1_20171025_xena_sp.gz>

- tcga_RSEM_gene_tpm，TOIL RSEM tpm (n=10,535) UCSC Toil RNAseq Recompute，下载TPM：<https://toil.xenahubs.net/download/tcga_RSEM_gene_tpm.gz>

- TCGA_phenotype_denseDataOnlyDownload.tsv，TCGA样本资料，下载地址：<https://pancanatlas.xenahubs.net/download/TCGA_phenotype_denseDataOnlyDownload.tsv.gz>

- Homo_sapiens.GRCh38.95.gtf，基因biotype，从ensembl获得：<https://asia.ensembl.org/info/data/ftp/index.html>，下载地址：<ftp://ftp.ensembl.org/pub/release-95/gtf/homo_sapiens/Homo_sapiens.GRCh38.95.gtf.gz>
