#!/usr/bin/env Rscript
# Auto-generated R dependency installation script
# Generated by FigureYa Rmd Dependency Manager
# Timestamp: 2025-09-12 01:33:45
# This script installs all required R packages for this project

# Set up mirrors for better download performance
options("repos" = c(CRAN = "https://mirrors.tuna.tsinghua.edu.cn/CRAN/"))
options(BioC_mirror = "http://mirrors.tuna.tsinghua.edu.cn/bioconductor/")

# Function to check if a package is installed
is_package_installed <- function(package_name) {
  return(package_name %in% rownames(installed.packages()))
}

# Function to install CRAN packages
install_cran_package <- function(package_name) {
  if (!is_package_installed(package_name)) {
    cat("Installing CRAN package:", package_name, "\n")
    tryCatch({
      install.packages(package_name, dependencies = TRUE)
      cat("Successfully installed:", package_name, "\n")
    }, error = function(e) {
      cat("Failed to install", package_name, ":", e$message, "\n")
    })
  } else {
    cat("Package already installed:", package_name, "\n")
  }
}

# Function to install Bioconductor packages
install_bioc_package <- function(package_name) {
  if (!is_package_installed(package_name)) {
    cat("Installing Bioconductor package:", package_name, "\n")
    tryCatch({
      if (!is_package_installed("BiocManager")) {
        install.packages("BiocManager")
      }
      BiocManager::install(package_name, update = FALSE, ask = FALSE)
      cat("Successfully installed:", package_name, "\n")
    }, error = function(e) {
      cat("Failed to install", package_name, ":", e$message, "\n")
    })
  } else {
    cat("Package already installed:", package_name, "\n")
  }
}

cat("Starting R package installation...\n")
cat("===========================================\n")


# Installing CRAN packages
cat("\nInstalling CRAN packages...\n")
cran_packages <- c("stringr", "ClassDiscovery", "knitr", "pROC", "BiocManager", "impute", "pRRophetic", "ggplot2", "cowplot", "RIdeogram", "BSgenome.Hsapiens.UCSC.hg19", "tidyverse", "magrittr", "readxl", "forcats", "deconstructSigs", "NMF", "corrplot", "Seurat", "dplyr", "export", "ggVennDiagram", "openxlsx", "colorfulVennPlot", "readr", "purrr", "grDevices", "Cairo", "tibble", "tidyr", "pk", "survival", "survminer", "glmnet", "affy", "affyPLM", "hgu133plus2.db", "gcrma", "scales", "coin", "pbapply", "survivalROC", "ggpubr", "gtools", "ggsignif", "xlsx", "GEOquery", "plyr", "circlize", "reshape2", "ggrepel", "janitor", "enrichplot", "ResourceSelection", "rms", "ggsci", "gridExtra", "grid", "devtools", "cgdsr", "survMisc", "shape", "igraph", "dendsort", "squash", "GOplot", "ggraph", "tidygraph", "ConsensusClusterPlus", "ChIPseeker", "GenomicFeatures", "MutationalPatterns", "BSgenome.Hsapiens.UCSC.hg38", "haven", "randomForest", "rgl", "caTools", "GSA", "VariantAnnotation", "ImmuLncRNA_0.1.0.tar.gz", "estimate", "SummarizedExperiment", "ImmuLncRNA", "aplot", "crosslinks", "BlandAltmanLeh", "MethComp", "smatr", "SingleCellExperiment", "pacman", "patchwork", "Rmisc", "randomForestSRC", "randomSurvivalForest", "ranger", "cicero", "monocle3", "survcomp", "survRM2", "pec", "riskRegression", "officer", "tdROC", "strucchange", "forestplot", "muhaz", "export_0.2.2.tar.gz", "extrafont", "extrafontdb", "trackViewer", "cluster", "oompaBase", "Boruta", "batchelor", "Hmisc", "msigdbr", "shadowtext", "ggstance", "DOSE", "pRRophetic_0.5.tar.gz", "ISOpureR", "tidyjson", "jsonlite", "wateRmelon", "meta", "mRMRe", "e1071", "mclust", "kableExtra", "tools", "caret", "leiden", "spatstat", "uwot", "ggbeeswarm", "AUCell", "ggplotify", "givitiR", "foreign", "ggnewscale", "ade4", "ggcor", "ape", "usedist", "vegan", "viridis", "matlab", "EnvStats", "showtext", "remotes", "EPIC", "MCPcounter", "IOBR", "gridBase", "tidyHeatmap", "entropy", "doParallel", "ChAMPdata", "colorRamps", "SeuratData", "future", "factoextra", "ggConvexHull", "lme4", "lolR", "ridge", "car", "RTN", "snow", "ComparisonSurv", "rstatix", "utils", "R.utils", "crosslink", "SNFtool", "ggalluvial", "RCircos", "rtracklayer", "randomcoloR", "quantiseqr", "ggprism", "ggcorrplot", "immunedeconv", "ifnb.SeuratData_3.1.0.tar.gz", "CellChat", "ifnb.SeuratData", "presto", "phangorn", "scMetabolism", "rsvd", "stringi", "graphics", "ggthemes", "ScBulkCCCI_0.1.3.tar.gz", "ScBulkCCCI", "networkD3", "bamp", "glmGamPoi", "MuSiC", "genefu", "PharmacoGx", "CoreGx", "shinyjs", "shinydashboard", "magicaxis", "lsa", "relations", "parallel", "SuperExactTest", "ggpp", "sampling", "InformationValue", "DealGPL570", "rmarkdown", "rPlotter", "hdf5r", "SeuratDisk", "Matrix", "CMScaller", "mixOmics", "plsRcox", "rlang", "superpc", "gbm", "CoxBoost", "survivalsvm", "BART", "miscTools", "compareC", "ggbreak", "classpredict", "dorothea", "mixtools", "viper", "magick", "ggpattern", "glue", "ggtext", "msa", "seqinr", "ggtree", "arrow", "reticulate", "Rmagic", "PMAPscore", "SPIA", "KEGGREST", "slingshot", "tradeSeq", "ggridges", "optparse", "nlme", "spatstat.explore", "regplot", "nomogramEx", "ktplots", "epitools", "SingleR", "xgboost", "mlbench", "SeuratObject", "fmsb", "cmprsk", "KMsurv", "ggord", "yyplot", "Gviz", "DDRTree", "iClusterPlus", "lattice", "DNAcopy", "AnnotationHub", "gtable", "rentrez", "pubmed.mineR", "jiebaR", "bibliometrix", "DT", "htmlwidgets", "ggtern", "sigFeature", "ggstatsplot", "GOSemSim", "iCluster_2.1.0.tar.gz", "CancerSubtypes", "discover", "matrixStats", "GetoptLong", "OmicCircos", "gganatogram", "wakefield", "MatchIt", "statmod", "timeROC", "motifbreakR", "fishplot", "rsvg", "future.apply", "smoothHR")

for (pkg in cran_packages) {
  install_cran_package(pkg)
}

# Installing Bioconductor packages
cat("\nInstalling Bioconductor packages...\n")
bioc_packages <- c("preprocessCore", "GO.db", "AnnotationDbi", "WGCNA", "gplots", "pheatmap", "clusterProfiler", "GSVA", "BSgenome", "GenomeInfoDb", "ComplexHeatmap", "VennDiagram", "RColorBrewer", "DESeq2", "limma", "edgeR", "ChAMP", "org.Hs.eg.db", "biomaRt", "minfi", "fgsea", "maftools", "TCGAbiolinks", "GSEABase", "pcaMethods", "monocle", "IHW", "scmap", "S4Vectors", "BiocParallel", "SimDesign", "sva", "miRBaseVersions.db", "miRBaseConverter", "rhdf5", "Biobase", "pamr", "GenomicRanges", "org.Mm.eg.db")

for (pkg in bioc_packages) {
  install_bioc_package(pkg)
}

cat("\n===========================================\n")
cat("Package installation completed!\n")
cat("You can now run your R scripts in this directory.\n")

