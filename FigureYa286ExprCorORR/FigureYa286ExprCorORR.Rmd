---
title: "FigureYa286ExprCorORR"
params:
  author: "Xiaofan Lu; Yasi Zhang"
  reviewer: "Ying Ge"
  date: "2025-05-20"
output: html_document
---

**Author(s)**: `r params$author`
**Reviewer(s)**: `r params$reviewer`
**Date**: `r params$date`

# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 需求描述
# Demand description

Fig. 4G这个是基因表达量和肿瘤客观缓解率orr相关性分析的图，主要难点是数据的来源问题及下载问题，纵坐标不会算。

Fig. 4G is a graph showing the correlation analysis between gene expression levels and the objective response rate (ORR) of tumors. The main challenges are the source and download of the data, as well as the calculation of the vertical axis coordinates.

![](example.png)

出自<https://molecular-cancer.biomedcentral.com/articles/10.1186/s12943-021-01462-z>

Fig. 4 确定MON2作为新型免疫肿瘤治疗靶点。
G MON2表达水平与免疫检查点抑制剂（ICB）客观缓解率（ORR）的Pearson相关性分析。仅纳入非零数据。

Source: <https://molecular-cancer.biomedcentral.com/articles/10.1186/s12943-021-01462-z>

Fig. 4 Determination of MON2 as novel immuno-oncology target.
G Pearson correlation between MON2 expression and objective response rate (ORR) for ICB. Only non-zero data was included.

# 应用场景
# Application scenarios

绘制某感兴趣变量与肿瘤客观缓解率ORR的相关性图。

不包括计算ORR的过程，21种TCGA当中的癌症的ORR已经算好，直接拿来用。

Plot the correlation between a variable of interest and the objective response rate (ORR) in tumors.

The ORR calculation process is not included; precomputed ORR values for 21 TCGA cancer types are used directly.

# 环境设置
# Environment Setup


```{r}
source("install_dependencies.R")

```

# 加载包
# Loading packages

```{r}
library(ggplot2)
library(data.table)
library(ggrepel)

# 显示英文报错信息
# Show English error messages
Sys.setenv(LANGUAGE = "en")

# 禁止chr转成factor
# Prevent character-to-factor conversion
options(stringsAsFactors = FALSE)
```

# 输入文件
# Input Files

ORR.txt，TCGA 21种癌症的ORR客观缓解率数据。源自这篇文章（**记得引用**）补充材料cbr190007supp1_prod.pdf的eTable的前两行（中间还有一行肿瘤）：Lee JS, Ruppin E. Multiomics Prediction of Response Rates to Therapies to Inhibit Programmed Cell Death 1 and Programmed Cell Death 1 Ligand 1. JAMA Oncol. 2019 Nov 1;5(11):1614-1618.

merged_sample_quality_annotations.tsv，肿瘤注释文件。下载自<https://gdc.cancer.gov/about-data/publications/pancanatlas>，下载地址<http://api.gdc.cancer.gov/data/1a7d7be8-675d-4e60-a105-19d4121bdebf>。

EBPlusPlusAdjustPANCAN_IlluminaHiSeq_RNASeqV2.geneExp.tsv，表达矩阵，第一列是基因，之后是其在每个样本中的表达量。下载自<http://api.gdc.cancer.gov/data/3586c0da-64d0-4b74-a449-5ff4d9136611>

ORR.txt, ORR (Objective Response Rate) data for 21 TCGA cancer types. Sourced from the first two rows (with one tumor row in between) of eTable in the supplementary material cbr190007supp1_prod.pdf of this paper (**remember to cite**): Lee JS, Ruppin E. Multiomics Prediction of Response Rates to Therapies to Inhibit Programmed Cell Death 1 and Programmed Cell Death 1 Ligand 1. JAMA Oncol. 2019 Nov 1;5(11):1614-1618.

merged_sample_quality_annotations.tsv, tumor annotation file. Downloaded from <https://gdc.cancer.gov/about-data/publications/pancanatlas>, download link <http://api.gdc.cancer.gov/data/1a7d7be8-675d-4e60-a105-19d4121bdebf>.

EBPlusPlusAdjustPANCAN_IlluminaHiSeq_RNASeqV2.geneExp.tsv, expression matrix, with the first column being genes and subsequent columns showing their expression levels in each sample. Downloaded from<http://api.gdc.cancer.gov/data/3586c0da-64d0-4b74-a449-5ff4d9136611>
