---
title: "FigureYa77baseZoom"
author: "Haitao Wang, Taojun Ye"
reviewer: "Ying Ge"
date: "2025-5-20"
output: html_document
---


# Academic Citation
If you use this code in your work or research, we kindly request that you cite our publication:

Xiaofan Lu, et al. (2025). FigureYa: A Standardized Visualization Framework for Enhancing Biomedical Data Interpretation and Research Efficiency. iMetaMed. https://doi.org/10.1002/imm3.70005


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# 设置knitr代码块的全局选项 / Set global options for knitr code chunks
```

## 需求描述

用base plot画出C图这种zoom in效果的图。

## Requirement description

Use a base plot to draw a C chart with zoom in effect.

![](example.png)

出自<https://www.sciencedirect.com/science/article/pii/S0092867415011952>

from<https://www.sciencedirect.com/science/article/pii/S0092867415011952>

## 应用场景

有时会遇到这样的问题：点的分布很不均匀，堆在一起的点很难标label。

解决办法：画整体的同时画局部，就能看清堆在一起的点了，写label也很清晰。

示例图用于展示多个基因在两组中各变异类型所占的百分比，用颜色表示变异类型，泡泡大小表示pvalue，泡泡所在的位置偏左上说明在IDC中占比高于ILC，反之亦然。该图不仅限于基因。

## Application scenarios

Sometimes we encounter such problems: the distribution of points is very uneven, and it is difficult to label the points stacked together.

Solution: While drawing the whole, draw the parts at the same time, so that you can see the points stacked together clearly, and the label is also very clear.

The example graph is used to display the percentage of multiple genes in each variant type in two groups, with colors indicating variant types and bubble sizes indicating p-value. The position of the bubble towards the upper left indicates a higher proportion in IDC than in ILC, and vice versa. This map is not limited to genes.

## 环境设置

## Environment settings

```{r}
source("install_dependencies.R")
# 设置系统环境变量，将语言设置为英文，确保R的报错信息以英文形式显示
# Set system environment variable to display R error messages in English
Sys.setenv(LANGUAGE = "en")

# 全局选项设置，禁止字符型变量自动转换为因子类型，避免数据类型意外转换
# Global option to disable automatic conversion of character variables to factors, preventing unexpected data type conversions
options(stringsAsFactors = FALSE)
```

## 输入文件

easy_input.csv，提供分组、个数及总数（用于计算百分比）、pvalue：

- 第一列是基因名；
- 第二列是分组；
- 第3-4、5-6列分别是在ILC（横坐标）和IDC（纵坐标）里的数量和总数，后面会用这两列计算百分比；
- 最后一列是pvalue。

示例数据整理自例文的Table 1. Recurrently Mutated Genes in Breast Cancer，这里只用了mutation，没加CNV，因此泡泡的位置跟原图有出入。

## Input file

easy_input.csv， Provide grouping, number, and total (for calculating percentages) pvalue：

-The first column is the gene name;
-The second column is grouping;
-Columns 3-4 and 5-6 represent the quantities and total numbers in ILC (horizontal axis) and IDC (vertical axis), respectively. These two columns will be used later to calculate the percentage;
-The last column is the p-value.

The example data is compiled from Table 1 of the example text. Recurrent Mutated Genes in Breast Cancer, where only mutation was used without adding CNV, resulting in a discrepancy in the position of the bubbles from the original image.
